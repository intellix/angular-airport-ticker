!function(){"use strict";angular.module("airportTicker",[]).directive("airportTicker",["$window","$timeout",function(a,b){return{restrict:"EA",scope:{format:"@",endDate:"@",onTick:"&",onFinish:"&"},templateUrl:"template/airport-ticker/airport-ticker.tpl.html",link:function(c,d,e){function f(){k=a.moment();var d=a.moment.duration(h.diff()),e={};angular.isDefined(c.units.days)&&(e.days=d.days()<0?[0,0]:("0"+d.days()).slice(-2).split("")),angular.isDefined(c.units.hours)&&(e.hours=d.hours()<0?[0,0]:("0"+d.hours()).slice(-2).split("")),angular.isDefined(c.units.minutes)&&(e.minutes=d.minutes()<0?[0,0]:("0"+d.minutes()).slice(-2).split("")),angular.isDefined(c.units.seconds)&&(e.seconds=d.seconds()<0?[0,0]:("0"+d.seconds()).slice(-2).split("")),angular.forEach(e,function(a,d){angular.forEach(a,function(a,e){var f=c.units[d].digits[e],g=f.values;(g.length<1||a!==g[0])&&g.push(a),(g.length>1||a!==g[0])&&(f.flipping=!0,j=b(function(){f.flipping=!1,g.shift()},1e3))})})}function g(){var a={label:"",digits:[{flipping:!1,values:[]},{flipping:!1,values:[]}]};c.units={},-1!==l.indexOf("d")&&(c.units.days=angular.copy(a),c.units.days.label="Days"),-1!==l.indexOf("h")&&(c.units.hours=angular.copy(a),c.units.hours.label="Hours"),-1!==l.indexOf("m")&&(c.units.minutes=angular.copy(a),c.units.minutes.label="Minutes"),-1!==l.indexOf("s")&&(c.units.seconds=angular.copy(a),c.units.seconds.label="Seconds"),b.cancel(i),b.cancel(j),m()}var h,i,j,k=a.moment(),l=c.format||"dmhs",m=function(){f(),k.isBefore(h)?(c.onTick&&c.onTick(),i=b(function(){m()},1e3)):c.onFinish&&c.onFinish()};e.$observe("endDate",function(){h=a.moment(c.$eval(e.endDate)),g()})}}}])}(),angular.module("airportTicker").run(["$templateCache",function(a){"use strict";a.put("template/airport-ticker/airport-ticker.tpl.html",'<div class="unit" ng-repeat="unit in units"><div class="flippers"><ul class="flipper" ng-repeat="digit in unit.digits" ng-class="{\'flipping\': digit.flipping }"><li class="now-prev" ng-repeat="v in digit.values track by $index" ng-class="{\'now\': $index === 0, \'prev\': $index === 1}"><div class="digit"><div class="top"><div class="shadow"></div><div class="shadow2"></div><div class="value">{{v}}</div></div><div class="bottom"><div class="shadow"></div><div class="shadow2"></div><div class="value">{{v}}</div></div></div></li></ul></div><div class="unit-label">{{unit.label}}</div></div>')}]);