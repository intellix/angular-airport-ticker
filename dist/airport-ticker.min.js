!function(){"use strict";angular.module("airportTicker",[]).directive("airportTicker",["$window","$timeout",function(a,b){return{restrict:"EA",scope:{endDate:"@",onTick:"&",onFinish:"&"},templateUrl:"template/airport-ticker/airport-ticker.tpl.html",link:function(c,d,e){function f(){k=a.moment();var d=a.moment.duration(h.diff()),e={days:d.days()<0?[0,0]:("0"+d.days()).slice(-2).split(""),hours:d.hours()<0?[0,0]:("0"+d.hours()).slice(-2).split(""),minutes:d.minutes()<0?[0,0]:("0"+d.minutes()).slice(-2).split(""),seconds:d.seconds()<0?[0,0]:("0"+d.seconds()).slice(-2).split("")};angular.forEach(e,function(a,d){angular.forEach(a,function(a,e){var f=c.units[d].digits[e],g=f.values;(g.length<1||a!==g[0])&&g.push(a),(g.length>2||a!==g[0])&&(f.flipping=!0,j=b(function(){f.flipping=!1,g.shift()},995))})})}function g(){c.units={days:{label:"Days",digits:[{flipping:!1,values:[]},{flipping:!1,values:[]}]},hours:{label:"Hours",digits:[{flipping:!1,values:[]},{flipping:!1,values:[]}]},minutes:{label:"Minutes",digits:[{flipping:!1,values:[]},{flipping:!1,values:[]}]},seconds:{label:"Seconds",digits:[{flipping:!1,values:[]},{flipping:!1,values:[]}]}},b.cancel(i),b.cancel(j),l()}var h,i,j,k=a.moment(),l=function(){f(),k.isBefore(h)?(c.onTick&&c.onTick(),i=b(function(){l()},1e3)):c.onFinish&&c.onFinish()};e.$observe("endDate",function(){h=a.moment(c.$eval(e.endDate)),g()})}}}])}(),angular.module("airportTicker").run(["$templateCache",function(a){"use strict";a.put("template/airport-ticker/airport-ticker.tpl.html",'<div class="unit" ng-repeat="unit in units"><div class="flippers"><ul class="flipper" ng-repeat="digit in unit.digits" ng-class="{\'flipping\': digit.flipping }"><li class="now-prev" ng-repeat="v in digit.values track by $index" ng-class="{\'now\': $index === 0, \'prev\': $index === 1}"><div class="digit"><div class="top"><div class="shadow"></div><div class="shadow2"></div><div class="value">{{v}}</div></div><div class="bottom"><div class="shadow"></div><div class="shadow2"></div><div class="value">{{v}}</div></div></div></li></ul></div><div class="unit-label">{{unit.label}}</div></div>')}]);